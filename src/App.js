import { Container, GridItem, SimpleGrid } from "@chakra-ui/react";
import { useState , useEffect} from "react";
import { Route, Switch , BrowserRouter, Router , Link} from "react-router-dom";
import { createBrowserHistory } from "history";
import preRenderMovies from "./hooks/preRenderMovies";
import CategoriesNav from "./components/CategoriesNav";
import Footer from "./components/Footer";
import MovieDetails from "./components/MovieDetails";
import Navbar from "./components/Navbar";
import Home from "./pages/Home";
import Movies from "./pages/Movies";
import NotFound from "./pages/NotFound"; // Import your 404 page component
import ReactGA from "react-ga4";

const trackingId = "G-Z090Q2W49P";
ReactGA.initialize(trackingId);

const history = createBrowserHistory();
history.listen(location => {

  ReactGA.send({ hitType: "pageview", page: location.pathname, title: location.pathname });
});

const App = () => {
  const [isOpen, setIsOpen] = useState(false);

  const [movies, setMovies] = useState(["/404","/movie-id/60794","/movie-id/60793","/movie-id/60792","/movie-id/60791","/movie-id/60790","/movie-id/60789","/movie-id/60788","/movie-id/60787","/movie-id/60786","/movie-id/60785","/movie-id/60784","/movie-id/60783","/movie-id/60782","/movie-id/60781","/movie-id/60780","/movie-id/60779","/movie-id/60778","/movie-id/60777","/movie-id/60776","/movie-id/60775","/movie-id/60774","/movie-id/60773","/movie-id/60772","/movie-id/60771","/movie-id/60770","/movie-id/60769","/movie-id/60768","/movie-id/60767","/movie-id/60765","/movie-id/60764","/movie-id/60763","/movie-id/60761","/movie-id/60760","/movie-id/60759","/movie-id/60758","/movie-id/60757","/movie-id/60755","/movie-id/60756","/movie-id/60754","/movie-id/60753","/movie-id/60752","/movie-id/60751","/movie-id/60750","/movie-id/60749","/movie-id/60748","/movie-id/60747","/movie-id/60746","/movie-id/60745","/movie-id/60744","/movie-id/60743","/movie-id/60742","/movie-id/60740","/movie-id/60739","/movie-id/60738","/movie-id/60737","/movie-id/60736","/movie-id/60735","/movie-id/60734","/movie-id/60733","/movie-id/60732","/movie-id/60731","/movie-id/60730","/movie-id/60729","/movie-id/60728","/movie-id/60727","/movie-id/60726","/movie-id/60725","/movie-id/60724","/movie-id/60723","/movie-id/60722","/movie-id/60721","/movie-id/60720","/movie-id/60718","/movie-id/60717","/movie-id/60716","/movie-id/60715","/movie-id/60714","/movie-id/60713","/movie-id/60712","/movie-id/60711","/movie-id/60710","/movie-id/60709","/movie-id/60708","/movie-id/60706","/movie-id/60705","/movie-id/60704","/movie-id/60703","/movie-id/60702","/movie-id/60701","/movie-id/60700","/movie-id/60699","/movie-id/60698","/movie-id/60697","/movie-id/60694","/movie-id/60695","/movie-id/60696","/movie-id/60693","/movie-id/60692","/movie-id/60691","/movie-id/60689","/movie-id/60688","/movie-id/60687","/movie-id/60686","/movie-id/60685","/movie-id/60684","/movie-id/60683","/movie-id/60682","/movie-id/60681","/movie-id/60680","/movie-id/60679","/movie-id/60678","/movie-id/60677","/movie-id/60675","/movie-id/60674","/movie-id/60676","/movie-id/60673","/movie-id/60672","/movie-id/60671","/movie-id/60670","/movie-id/60669","/movie-id/60668","/movie-id/60667","/movie-id/60666","/movie-id/60665","/movie-id/60664","/movie-id/60662","/movie-id/60661","/movie-id/60660","/movie-id/60659","/movie-id/60658","/movie-id/60657","/movie-id/60656","/movie-id/60655","/movie-id/60654","/movie-id/60653","/movie-id/60652","/movie-id/60651","/movie-id/60650","/movie-id/60649","/movie-id/60648","/movie-id/60647","/movie-id/60646","/movie-id/60645","/movie-id/60644","/movie-id/60643","/movie-id/60640","/movie-id/60641","/movie-id/60642","/movie-id/60638","/movie-id/60639","/movie-id/60635","/movie-id/60636","/movie-id/60637","/movie-id/60633","/movie-id/60634","/movie-id/60630","/movie-id/60632","/movie-id/60629","/movie-id/60628","/movie-id/60626","/movie-id/60624","/movie-id/60625","/movie-id/60623","/movie-id/60619","/movie-id/60620","/movie-id/60621","/movie-id/60622","/movie-id/60618","/movie-id/60616","/movie-id/60617","/movie-id/60615","/movie-id/60613","/movie-id/60614","/movie-id/60612","/movie-id/60611","/movie-id/60610","/movie-id/60609","/movie-id/60608","/movie-id/60607","/movie-id/60606","/movie-id/60605","/movie-id/60604","/movie-id/60603","/movie-id/60602","/movie-id/60601","/movie-id/60600","/movie-id/60599","/movie-id/60598","/movie-id/60597","/movie-id/60596","/movie-id/60595","/movie-id/60594","/movie-id/60593","/movie-id/60592","/movie-id/60591","/movie-id/60590","/movie-id/60588","/movie-id/60589","/movie-id/60587","/movie-id/60586","/movie-id/60585","/movie-id/60584","/movie-id/60583","/movie-id/60582","/movie-id/60581","/movie-id/60579","/movie-id/60580","/movie-id/60578","/movie-id/60577","/movie-id/60576","/movie-id/60575","/movie-id/60574","/movie-id/60573","/movie-id/60572","/movie-id/60571","/movie-id/60567","/movie-id/60568","/movie-id/60569","/movie-id/60570","/movie-id/60566","/movie-id/60565","/movie-id/60561","/movie-id/60562","/movie-id/60563","/movie-id/60564","/movie-id/60557","/movie-id/60558","/movie-id/60559","/movie-id/60560","/movie-id/60556","/movie-id/60555","/movie-id/60554","/movie-id/60552","/movie-id/60553","/movie-id/60551","/movie-id/60549","/movie-id/60550","/movie-id/60548","/movie-id/60547","/movie-id/60545","/movie-id/60546","/movie-id/60544","/movie-id/60543","/movie-id/60542","/movie-id/60541","/movie-id/60540","/movie-id/60539","/movie-id/60538","/movie-id/60537","/movie-id/60534","/movie-id/60533","/movie-id/60532","/movie-id/60531","/movie-id/60530","/movie-id/60529","/movie-id/60528","/movie-id/60527","/movie-id/60526","/movie-id/60524","/movie-id/60523","/movie-id/60521","/movie-id/60522","/movie-id/60520","/movie-id/60518","/movie-id/60519","/movie-id/60517","/movie-id/60516","/movie-id/60515","/movie-id/60513","/movie-id/60514","/movie-id/60512","/movie-id/60510","/movie-id/60511","/movie-id/60509","/movie-id/60507","/movie-id/60508","/movie-id/60506","/movie-id/60502","/movie-id/60503","/movie-id/60504","/movie-id/60505","/movie-id/60501","/movie-id/60500","/movie-id/60499","/movie-id/60498","/movie-id/60497","/movie-id/60496","/movie-id/60495","/movie-id/60493","/movie-id/60494","/movie-id/60492","/movie-id/60491","/movie-id/60490","/movie-id/60489","/movie-id/60488","/movie-id/60487","/movie-id/60486","/movie-id/60484","/movie-id/60485","/movie-id/60483","/movie-id/60482","/movie-id/60481","/movie-id/60480","/movie-id/60479","/movie-id/60478","/movie-id/60477","/movie-id/60476","/movie-id/60475","/movie-id/60474","/movie-id/60473","/movie-id/60472","/movie-id/60471","/movie-id/60470","/movie-id/60469","/movie-id/60468","/movie-id/60467","/movie-id/60466","/movie-id/60465","/movie-id/60464","/movie-id/60463","/movie-id/60462","/movie-id/60461","/movie-id/60460","/movie-id/60459","/movie-id/60458","/movie-id/60457","/movie-id/60456","/movie-id/60455","/movie-id/60454","/movie-id/60453","/movie-id/60452","/movie-id/60451","/movie-id/60450","/movie-id/60449","/movie-id/60448","/movie-id/60447","/movie-id/60446","/movie-id/60445","/movie-id/60444","/movie-id/60443","/movie-id/60442","/movie-id/60441","/movie-id/60440","/movie-id/60439","/movie-id/60438","/movie-id/60437","/movie-id/60436","/movie-id/60435","/movie-id/60434","/movie-id/60433","/movie-id/60432","/movie-id/60431","/movie-id/60430","/movie-id/60429","/movie-id/60428","/movie-id/60427","/movie-id/60426","/movie-id/60425","/movie-id/60424","/movie-id/60423","/movie-id/60422","/movie-id/60421","/movie-id/60420","/movie-id/60419","/movie-id/60418","/movie-id/60417","/movie-id/60416","/movie-id/60415","/movie-id/60414","/movie-id/60413","/movie-id/60412","/movie-id/60411","/movie-id/60410","/movie-id/60409","/movie-id/60408","/movie-id/60407","/movie-id/60406","/movie-id/60405","/movie-id/60404","/movie-id/60403","/movie-id/60402","/movie-id/60401","/movie-id/60400","/movie-id/60399","/movie-id/60398","/movie-id/60397","/movie-id/60396","/movie-id/60395","/movie-id/60394","/movie-id/60393","/movie-id/60392","/movie-id/60391","/movie-id/60390","/movie-id/60389","/movie-id/60388","/movie-id/60387","/movie-id/60386","/movie-id/60385","/movie-id/60384","/movie-id/60383","/movie-id/60382","/movie-id/60381","/movie-id/60380","/movie-id/60379","/movie-id/60378","/movie-id/60377","/movie-id/60376","/movie-id/60375","/movie-id/60374","/movie-id/60373","/movie-id/60372","/movie-id/60371","/movie-id/60370","/movie-id/60369","/movie-id/60368","/movie-id/60367","/movie-id/60366","/movie-id/60365","/movie-id/60364","/movie-id/60363","/movie-id/60362","/movie-id/60361","/movie-id/60360","/movie-id/60359","/movie-id/60358","/movie-id/60357","/movie-id/60356","/movie-id/60355","/movie-id/60354","/movie-id/60353","/movie-id/60352","/movie-id/60351","/movie-id/60350","/movie-id/60349","/movie-id/60348","/movie-id/60346","/movie-id/60345","/movie-id/60344","/movie-id/60343","/movie-id/60342","/movie-id/60341","/movie-id/60340","/movie-id/60339","/movie-id/60338","/movie-id/60337","/movie-id/60335","/movie-id/60332","/movie-id/60331","/movie-id/60330","/movie-id/60329","/movie-id/60328","/movie-id/60327","/movie-id/60326","/movie-id/60325","/movie-id/60324","/movie-id/60323","/movie-id/60322","/movie-id/60321","/movie-id/60320","/movie-id/60319","/movie-id/60318","/movie-id/60317","/movie-id/60316","/movie-id/60314","/movie-id/60313","/movie-id/60312","/movie-id/60311","/movie-id/60310","/movie-id/60309","/movie-id/60308","/movie-id/60307","/movie-id/60306","/movie-id/60305","/movie-id/60304","/movie-id/60303","/movie-id/60302","/movie-id/60301","/movie-id/60300","/movie-id/60299","/movie-id/60298","/movie-id/60297","/movie-id/60296","/movie-id/60295","/movie-id/60294","/movie-id/60293","/movie-id/60292","/movie-id/60291","/movie-id/60290","/movie-id/60289","/movie-id/60288","/movie-id/60287","/movie-id/60286","/movie-id/60285","/movie-id/60284","/movie-id/60283","/movie-id/60282","/movie-id/60281","/movie-id/60280","/movie-id/60279","/movie-id/60278","/movie-id/60277","/movie-id/60276","/movie-id/60275","/movie-id/60274","/movie-id/60273","/movie-id/60272","/movie-id/60271","/movie-id/60270","/movie-id/60269","/movie-id/60268","/movie-id/60267","/movie-id/60265","/movie-id/60264","/movie-id/60263","/movie-id/60262","/movie-id/60261","/movie-id/60260","/movie-id/60259","/movie-id/60258","/movie-id/60257","/movie-id/60256","/movie-id/60255","/movie-id/60254","/movie-id/60253","/movie-id/60252","/movie-id/60251","/movie-id/60250","/movie-id/60249","/movie-id/60248","/movie-id/60247","/movie-id/60246","/movie-id/60245","/movie-id/60244","/movie-id/60243","/movie-id/60242","/movie-id/60241","/movie-id/60240","/movie-id/60239","/movie-id/60238","/movie-id/60237","/movie-id/60236","/movie-id/60235","/movie-id/60234","/movie-id/60233","/movie-id/60232","/movie-id/60231","/movie-id/60230","/movie-id/60229","/movie-id/60228","/movie-id/60227","/movie-id/60226","/movie-id/60225","/movie-id/60224","/movie-id/60223","/movie-id/60222","/movie-id/60221","/movie-id/60220","/movie-id/60219","/movie-id/60217","/movie-id/60216","/movie-id/60215","/movie-id/60214","/movie-id/60213","/movie-id/60212","/movie-id/60210","/movie-id/60209","/movie-id/60208","/movie-id/60207","/movie-id/60206","/movie-id/60205","/movie-id/60204","/movie-id/60203","/movie-id/60202","/movie-id/60201","/movie-id/60200","/movie-id/60199","/movie-id/60198","/movie-id/60197","/movie-id/60195","/movie-id/60194","/movie-id/60193","/movie-id/60192","/movie-id/60191","/movie-id/60190","/movie-id/60189","/movie-id/60188","/movie-id/60187","/movie-id/60185","/movie-id/60184","/movie-id/60183","/movie-id/60182","/movie-id/60181","/movie-id/60180","/movie-id/60179","/movie-id/60178","/movie-id/60177","/movie-id/60176","/movie-id/60175","/movie-id/60174","/movie-id/60173","/movie-id/60172","/movie-id/60171","/movie-id/60170","/movie-id/60169","/movie-id/60168","/movie-id/60167","/movie-id/60166","/movie-id/60165","/movie-id/60164","/movie-id/60163","/movie-id/60161","/movie-id/60160","/movie-id/60159","/movie-id/60158","/movie-id/60157","/movie-id/60156","/movie-id/60155","/movie-id/60154","/movie-id/60153","/movie-id/60152","/movie-id/60151","/movie-id/60150","/movie-id/60149","/movie-id/60148","/movie-id/60147","/movie-id/60146","/movie-id/60145","/movie-id/60144","/movie-id/60143","/movie-id/60142","/movie-id/60141","/movie-id/60140","/movie-id/60139","/movie-id/60138","/movie-id/60137","/movie-id/60136","/movie-id/60135","/movie-id/60134","/movie-id/60133","/movie-id/60132","/movie-id/60131","/movie-id/60130","/movie-id/60129","/movie-id/60128","/movie-id/60127","/movie-id/60126","/movie-id/60125","/movie-id/60124","/movie-id/60123","/movie-id/60122","/movie-id/60121","/movie-id/60120","/movie-id/60119","/movie-id/60118","/movie-id/60117","/movie-id/60116","/movie-id/60115","/movie-id/60114","/movie-id/60113","/movie-id/60112","/movie-id/60111","/movie-id/60110","/movie-id/60109","/movie-id/60108","/movie-id/60107","/movie-id/60106","/movie-id/60105","/movie-id/60104","/movie-id/60103","/movie-id/60102","/movie-id/60101","/movie-id/60100","/movie-id/60098","/movie-id/60097","/movie-id/60096","/movie-id/60094","/movie-id/60093","/movie-id/60092","/movie-id/60091","/movie-id/60090","/movie-id/60089","/movie-id/60088","/movie-id/60087","/movie-id/60086","/movie-id/60085","/movie-id/60084","/movie-id/60083","/movie-id/60082","/movie-id/60081","/movie-id/60080","/movie-id/60079","/movie-id/60078","/movie-id/60077","/movie-id/60075","/movie-id/60074","/movie-id/60073","/movie-id/60072","/movie-id/60071","/movie-id/60070","/movie-id/60069","/movie-id/60068","/movie-id/60067","/movie-id/60066","/movie-id/60065","/movie-id/60064","/movie-id/60063","/movie-id/60062","/movie-id/60061","/movie-id/60060","/movie-id/60059","/movie-id/60058","/movie-id/60057","/movie-id/60056","/movie-id/60055","/movie-id/60054","/movie-id/60053","/movie-id/60052","/movie-id/60051","/movie-id/60050","/movie-id/60049","/movie-id/60048","/movie-id/60047","/movie-id/60046","/movie-id/60045","/movie-id/60044","/movie-id/60042","/movie-id/60041","/movie-id/60040","/movie-id/60039","/movie-id/60038","/movie-id/60037","/movie-id/60036","/movie-id/60035","/movie-id/60034","/movie-id/60033","/movie-id/60032","/movie-id/60031","/movie-id/60030","/movie-id/60029","/movie-id/60028","/movie-id/60027","/movie-id/60026","/movie-id/60025","/movie-id/60024","/movie-id/60023","/movie-id/60022","/movie-id/60021","/movie-id/60019","/movie-id/60018","/movie-id/60017","/movie-id/60016","/movie-id/60015","/movie-id/60014","/movie-id/60010","/movie-id/60011","/movie-id/60013","/movie-id/60012","/movie-id/60008","/movie-id/60007","/movie-id/60006","/movie-id/60005","/movie-id/60004","/movie-id/60003","/movie-id/60002","/movie-id/60001","/movie-id/60000","/movie-id/59999","/movie-id/59998","/movie-id/59997","/movie-id/59996","/movie-id/59995","/movie-id/59994","/movie-id/59993","/movie-id/59992","/movie-id/59991","/movie-id/59990","/movie-id/59989","/movie-id/59988","/movie-id/59987","/movie-id/59986","/movie-id/59985","/movie-id/59984","/movie-id/59983","/movie-id/59982","/movie-id/59981","/movie-id/59980","/movie-id/59979","/movie-id/59978","/movie-id/59977","/movie-id/59976","/movie-id/59975","/movie-id/59974","/movie-id/59973","/movie-id/59972","/movie-id/59971","/movie-id/59970","/movie-id/59969","/movie-id/59968","/movie-id/59967","/movie-id/59966","/movie-id/59965","/movie-id/59964","/movie-id/59962","/movie-id/59961","/movie-id/59960","/movie-id/59959","/movie-id/59958","/movie-id/59957","/movie-id/59956","/movie-id/59955","/movie-id/59954","/movie-id/59953","/movie-id/59952","/movie-id/59951","/movie-id/59950","/movie-id/59949","/movie-id/59948","/movie-id/59947","/movie-id/59946","/movie-id/59945","/movie-id/59944","/movie-id/59943","/movie-id/59941","/movie-id/59940","/movie-id/59939","/movie-id/59938","/movie-id/59937","/movie-id/59936","/movie-id/59935","/movie-id/59934","/movie-id/59933","/movie-id/59932","/movie-id/59931","/movie-id/59930","/movie-id/59929","/movie-id/59928","/movie-id/59927","/movie-id/59926","/movie-id/59925","/movie-id/59924","/movie-id/59923","/movie-id/59922","/movie-id/59921","/movie-id/59920","/movie-id/59919","/movie-id/59918","/movie-id/59917","/movie-id/59915","/movie-id/59914","/movie-id/59913","/movie-id/59912","/movie-id/59911","/movie-id/59910","/movie-id/59909","/movie-id/59908","/movie-id/59907","/movie-id/59905","/movie-id/59904","/movie-id/59902","/movie-id/59901","/movie-id/59900","/movie-id/59899","/movie-id/59898","/movie-id/59897","/movie-id/59896","/movie-id/59895","/movie-id/59894","/movie-id/59893","/movie-id/59892","/movie-id/59891","/movie-id/59890","/movie-id/59889","/movie-id/59888","/movie-id/59887","/movie-id/59886","/movie-id/59885","/movie-id/59884","/movie-id/59883","/movie-id/59882","/movie-id/59881","/movie-id/59880","/movie-id/59879","/movie-id/59878","/movie-id/59877","/movie-id/59876","/movie-id/59875","/movie-id/59874","/movie-id/59873","/movie-id/59872","/movie-id/59871","/movie-id/59870","/movie-id/59869","/movie-id/59868","/movie-id/59866","/movie-id/59865","/movie-id/59864","/movie-id/59863","/movie-id/59862","/movie-id/59861","/movie-id/59860","/movie-id/59859","/movie-id/59858","/movie-id/59857","/movie-id/59856","/movie-id/59855","/movie-id/59854","/movie-id/59853","/movie-id/59852","/movie-id/59851","/movie-id/59850","/movie-id/59849","/movie-id/59848","/movie-id/59847","/movie-id/59846","/movie-id/59845","/movie-id/59844","/movie-id/59843","/movie-id/59841","/movie-id/59842","/movie-id/59840","/movie-id/59839","/movie-id/59838","/movie-id/59837","/movie-id/59836","/movie-id/59835","/movie-id/59834","/movie-id/59832","/movie-id/59833","/movie-id/59831","/movie-id/59830","/movie-id/59829","/movie-id/59828","/movie-id/59826","/movie-id/59827","/movie-id/59825","/movie-id/59824","/movie-id/59823","/movie-id/59821","/movie-id/59822","/movie-id/59820","/movie-id/59819","/movie-id/59818","/movie-id/59817","/movie-id/59816","/movie-id/59815","/movie-id/59814","/movie-id/59813","/movie-id/59812","/movie-id/59811","/movie-id/59809","/movie-id/59810","/movie-id/59807","/movie-id/59808","/movie-id/59806","/movie-id/59804","/movie-id/59805","/movie-id/59803","/movie-id/59802","/movie-id/59801","/movie-id/59800","/movie-id/59797","/movie-id/59798","/movie-id/59799","/movie-id/59796","/movie-id/59794","/movie-id/59795","/movie-id/59792","/movie-id/59793","/movie-id/59791","/movie-id/59790","/movie-id/59788","/movie-id/59789","/movie-id/59787","/movie-id/59786","/movie-id/59785","/movie-id/59784","/movie-id/59783","/movie-id/59782","/movie-id/59781","/movie-id/59780","/movie-id/59779","/movie-id/59777","/movie-id/59778","/movie-id/59776","/movie-id/59772","/movie-id/59773","/movie-id/59774","/movie-id/59775","/movie-id/59771","/movie-id/59770","/movie-id/59768","/movie-id/59769","/movie-id/59767","/movie-id/59766","/movie-id/59765","/movie-id/59764"]);

  // useEffect(() => {
  //   const fetchMovies = async () => {
  //     const moviesData = await preRenderMovies();
  //     setMovies(moviesData);
  //   };
  //   fetchMovies();
  // }, []);

  // console.log(pre_render_movies);
  const toggleSideNav = () => {
    setIsOpen(!isOpen);
  };

  return (
    <Container
      as="main"
      maxW={{
        xs: "full",
        md: "720px",
        lg: "960px",
        xl: "1140px",
        xxl: "1320px",
      }}
    >
      <BrowserRouter history={history}>
      {/* <HashRouter> */}
        <Navbar toggleSideNav={toggleSideNav} />
        <GridItem>
        {movies.map((movie, index) => (
            <Link key={index} to={`${movie}`}>
              {movie.title}
            </Link>
          ))}
        </GridItem>
        <SimpleGrid columns={5} row={1} spacing={6}>
          <GridItem colSpan={{ base: 5, md: 4 }}>
            <Switch>
              <Route exact path="/" component={Home} />
              <Route path="/movies/" component={Movies} />
              <Route exact path="/movie-id/:movie_id" component={MovieDetails} />
              <Route path="*" component={NotFound} />
            </Switch>
          </GridItem>
          <GridItem>
            
            <CategoriesNav
              isOpen={isOpen}
              toggleSideNav={toggleSideNav}
              setIsOpen={setIsOpen}
            />
          </GridItem>
        </SimpleGrid>
        <MovieDetails />
        <Footer />
        
      {/* </HashRouter> */}
      </BrowserRouter>
    </Container>
  );
};

export default App;
